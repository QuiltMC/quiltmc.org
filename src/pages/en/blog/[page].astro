---
import Base from "@layouts/Base.astro";
import Paginator from "@setpieces/Paginator.astro";
import { sortByDescending } from "@util/Util";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import type { Page, GetStaticPaths } from "astro"
import type { BaseProps } from "@layouts/Base.astro";

interface Props {
	page: Page<CollectionEntry<"blog">>
	content: BaseProps
}

export const getStaticPaths = (async ({ paginate }) => {
  let allPosts = await getCollection("blog")
  sortByDescending(allPosts, (post) => new Date(post.data.date));
  return paginate(allPosts, { pageSize: 5 });
}) satisfies GetStaticPaths;
---

<Base content={Astro.props.content}>
	<Paginator page={Astro.props.page} />
</Base>
