---
import LanguageModal from "@atoms/LanguageModal.astro";
import Footer from "@setpieces/Footer.astro";
import HtmlHead, { HeadProps } from "@setpieces/HtmlHead.astro";
import NavBar from "@setpieces/NavBar.astro";

import i18next from "i18next";
import Variables from "@data/Variables";

export interface BaseProps {
	content: Inner,
}
export interface Inner extends HeadProps {
	isPrivate?: boolean,
}
const {
	title,
	description,
	date,
} = (Astro.props as BaseProps).content;

const variables = new Variables(title, description);
const rtl = variables.rtl ? 'rtl' : 'ltr'

// extract locale from URL
const match = (Astro.url.pathname + '/').match(/^\/(\w+)\//);
if (match) {
	i18next.changeLanguage(match[1]);
}
---

<!DOCTYPE html>

<html lang={i18next.language} dir={rtl}>

<HtmlHead title={title} description={description} date={date} />

<body class="page">
	{ !Astro.props.navless &&
	<NavBar root={Astro.props.root} /> }

	<slot />

	<Footer />
	<LanguageModal />

	<!-- <script>
	{% if page.has_downloads %}
	window.pageHasDownloads = true
	{% else %}
	window.pageHasDownloads = false
	{% endif %}
</script> -->

</body>


</html>