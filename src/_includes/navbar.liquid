{% assign style = include.style | default: "is-dark" -%}

<nav class="navbar {{ style }}" role="navigation" aria-label="main navigation" data-controller="navbar">
    <div class="navbar-brand">
        <a class="navbar-item pr-6" href="{{ site.baseurl }}/">
            <img src="{{ "/assets/img/logo.svg" | relative_url }}" alt="Quilt Logo" />

            <span class="ml-2">QuiltMC</span>
        </a>

        <a role="button" data-navbar-target="menu" data-action="click->navbar#toggle" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" data-navbar-target="menu">
        <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
                {% assign is_about = page.url | startswith: "/about/" -%}

                <a href="/about/" class="navbar-link is-arrowless {% if is_about %}is-active{% endif %}">
                    About
                </a>

                <div class="navbar-dropdown is-boxed">
                    {% assign about_pages = site.about | sort: "title" %}

                    {% for p in about_pages %}
                        {% include nav_link.liquid text=p.title href=p.url subpage=false %}
                    {% endfor %}
                </div>
            </div>

            {% include nav_link.liquid text="Blog" href="/blog/" subpage=true %}

            <div class="navbar-item has-dropdown is-hoverable">
                {% assign is_community = page.url | startswith: "/community/" -%}

                <a href="/community/" class="navbar-link is-arrowless {% if is_community %}is-active{% endif %}">
                    Community
                </a>

                <div class="navbar-dropdown is-right is-boxed">
                    {% assign community_pages = site.community | sort: "title" %}

                    {% for p in community_pages %}
                        {% include nav_link.liquid text=p.title href=p.url subpage=false %}
                    {% endfor %}
                </div>
            </div>

            {% include nav_link.liquid text="Install" href="/install/" subpage=true %}

            <div class="navbar-item has-dropdown is-hoverable">
                {% assign is_usage = page.url | startswith: "/usage/" -%}

                <a href="/usage/" class="navbar-link is-arrowless {% if is_usage %}is-active{% endif %}">
                    Usage
                </a>

                <div class="navbar-dropdown is-right is-boxed">
                    {% assign usage_pages = site.usage | sort: "title" %}

                    {% for p in usage_pages %}
                        {% include nav_link.liquid text=p.title href=p.url subpage=false %}
                    {% endfor %}

                    <div class="divider"> External Links </div>

                    {% include nav_link.liquid text="Quilt Import Utility" href="https://lambdaurora.dev/tools/import_quilt.html" subpage=false %}
                </div>
            </div>

            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link is-arrowless">
                    <span class="is-hidden-desktop">
                        More Pages
                    </span>
                    <span class="icon is-hidden-mobile is-hidden-tablet-only">
                        <i class="fas fa-ellipsis-v"></i>
                    </span>
                </a>

                <div class="navbar-dropdown is-right is-boxed">
                    {% include nav_link.liquid text="Minecraft Patch Notes" href="/mc-patchnotes/" icon="fas fa-notebook" %}
                    {% include nav_link.liquid text="Openings" href="/openings/" icon= "fas fa-briefcase" %}
                    {% include nav_link.liquid text="Staff Resources" href="/staff/" icon="fas fa-clipboard-user" subpage=true %}

                    <div class="divider"> External Links </div>

                    {% include nav_link.liquid target="_blank" text="Maven Repository" href="https://maven.quiltmc.org" icon="fas fa-feather-pointed" %}
                </div>
            </div>
        </div>
    </div>
</nav>
